"use strict";(self.webpackChunkdynet=self.webpackChunkdynet||[]).push([[815],{4677:(e,s,a)=>{a.d(s,{Z:()=>i,y:()=>n});var l=a(3263);const r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"https://backend-dynet2-1.onrender.com",n=l.Z.create({baseURL:r,headers:{"Content-Type":"application/json"},withCredentials:!0}),t=l.Z.create({baseURL:r,headers:{"Content-Type":"application/json"},withCredentials:!0});t.interceptors.response.use((e=>e),(async e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("accessToken"),localStorage.removeItem("roles"),window.location.href="/login"),Promise.reject(e)}));const i=t},1896:(e,s,a)=>{a.d(s,{VF:()=>x,sm:()=>p,Te:()=>j,Gu:()=>v});var l=a(1413),r=a(5987),n=a(2791),t=a(184);const i=["children","variant","size","type","loading","disabled","fullWidth","icon","onClick","className"],o=e=>{let{children:s,variant:a="primary",size:n="medium",type:o="button",loading:c=!1,disabled:d=!1,fullWidth:u=!1,icon:m=null,onClick:h,className:p=""}=e,x=(0,r.Z)(e,i);const v=["ui-button","ui-button--".concat(a),"ui-button--".concat(n),u&&"ui-button--full-width",c&&"ui-button--loading",p].filter(Boolean).join(" ");return(0,t.jsxs)("button",(0,l.Z)((0,l.Z)({type:o,className:v,disabled:d||c,onClick:h},x),{},{children:[c&&(0,t.jsx)("span",{className:"ui-button__spinner","aria-hidden":"true",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"ui-button__spinner-icon",children:(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeDasharray:"31.4 31.4"})})}),m&&!c&&(0,t.jsx)("span",{className:"ui-button__icon",children:m}),(0,t.jsx)("span",{className:"ui-button__text",children:s})]}))},c=["label","type","placeholder","value","onChange","onBlur","error","helperText","required","disabled","readOnly","icon","className","id","name"],d=(0,n.forwardRef)(((e,s)=>{let{label:a,type:n="text",placeholder:i,value:o,onChange:d,onBlur:u,error:m,helperText:h,required:p=!1,disabled:x=!1,readOnly:v=!1,icon:j=null,className:b="",id:N,name:g}=e,y=(0,r.Z)(e,c);const f=N||g||"input-".concat(Math.random().toString(36).substr(2,9)),C=["ui-input__field",m&&"ui-input__field--error",j&&"ui-input__field--with-icon",b].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:"ui-input",children:[a&&(0,t.jsxs)("label",{htmlFor:f,className:"ui-input__label",children:[a,p&&(0,t.jsx)("span",{className:"ui-input__required",children:"*"})]}),(0,t.jsxs)("div",{className:"ui-input__wrapper",children:[j&&(0,t.jsx)("span",{className:"ui-input__icon",children:j}),(0,t.jsx)("input",(0,l.Z)({ref:s,id:f,name:g,type:n,placeholder:i,value:o,onChange:d,onBlur:u,disabled:x,readOnly:v,required:p,className:C,"aria-invalid":!!m,"aria-describedby":m?"".concat(f,"-error"):h?"".concat(f,"-helper"):void 0},y))]}),m&&(0,t.jsx)("span",{id:"".concat(f,"-error"),className:"ui-input__error",role:"alert",children:m}),h&&!m&&(0,t.jsx)("span",{id:"".concat(f,"-helper"),className:"ui-input__helper",children:h})]})}));d.displayName="Input";const u=["children","title","subtitle","icon","actions","variant","padding","className","onClick","hoverable"],m=e=>{let{children:s,title:a,subtitle:n,icon:i,actions:o,variant:c="default",padding:d="medium",className:m="",onClick:h,hoverable:p=!1}=e,x=(0,r.Z)(e,u);const v=["ui-card","ui-card--".concat(c),"ui-card--padding-".concat(d),p&&"ui-card--hoverable",h&&"ui-card--clickable",m].filter(Boolean).join(" "),j=h?"button":"div";return(0,t.jsxs)(j,(0,l.Z)((0,l.Z)({className:v,onClick:h,type:h?"button":void 0},x),{},{children:[(a||i||o)&&(0,t.jsxs)("div",{className:"ui-card__header",children:[(0,t.jsxs)("div",{className:"ui-card__header-content",children:[i&&(0,t.jsx)("span",{className:"ui-card__icon",children:i}),(0,t.jsxs)("div",{className:"ui-card__titles",children:[a&&(0,t.jsx)("h3",{className:"ui-card__title",children:a}),n&&(0,t.jsx)("p",{className:"ui-card__subtitle",children:n})]})]}),o&&(0,t.jsx)("div",{className:"ui-card__actions",children:o})]}),(0,t.jsx)("div",{className:"ui-card__content",children:s})]}))};m.Footer=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"ui-card__footer ".concat(a),children:s})};const h=e=>{let{open:s,onClose:a,title:l,children:r,size:i="medium",showCloseButton:o=!0,closeOnOverlayClick:c=!0,closeOnEscape:d=!0,footer:u,className:m=""}=e;const h=(0,n.useCallback)((e=>{"Escape"===e.key&&d&&a()}),[d,a]);if((0,n.useEffect)((()=>(s&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow=""})),[s,h]),!s)return null;return(0,t.jsx)("div",{className:"ui-modal__overlay",onClick:e=>{e.target===e.currentTarget&&c&&a()},role:"dialog","aria-modal":"true",children:(0,t.jsxs)("div",{className:"ui-modal ui-modal--".concat(i," ").concat(m),children:[(l||o)&&(0,t.jsxs)("div",{className:"ui-modal__header",children:[l&&(0,t.jsx)("h2",{className:"ui-modal__title",children:l}),o&&(0,t.jsx)("button",{className:"ui-modal__close",onClick:a,"aria-label":"Close modal",children:"\u2715"})]}),(0,t.jsx)("div",{className:"ui-modal__content",children:r}),u&&(0,t.jsx)("div",{className:"ui-modal__footer",children:u})]})})},p=e=>{let{open:s,onClose:a,onConfirm:l,title:r="Confirm Action",message:n,confirmText:i="Confirm",cancelText:c="Cancel",variant:d="danger",loading:u=!1}=e;return(0,t.jsx)(h,{open:s,onClose:a,title:r,size:"small",footer:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{variant:"secondary",onClick:a,disabled:u,children:c}),(0,t.jsx)(o,{variant:d,onClick:l,loading:u,children:i})]}),children:(0,t.jsx)("p",{className:"ui-modal__message",children:n})})},x=e=>{let{open:s,onClose:a,title:l="Alert",message:r,buttonText:n="OK",variant:i="primary"}=e;return(0,t.jsx)(h,{open:s,onClose:a,title:l,size:"small",footer:(0,t.jsx)(o,{variant:i,onClick:a,children:n}),children:(0,t.jsx)("p",{className:"ui-modal__message",children:r})})},v=e=>{let{message:s="Loading...",size:a="medium",fullPage:l=!1,className:r=""}=e;const n=["ui-state","ui-state--loading","ui-state--".concat(a),l&&"ui-state--full-page",r].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:n,role:"status","aria-live":"polite",children:[(0,t.jsx)("div",{className:"ui-state__spinner",children:(0,t.jsx)("svg",{viewBox:"0 0 50 50",className:"ui-state__spinner-icon",children:(0,t.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"31.4 31.4"})})}),s&&(0,t.jsx)("p",{className:"ui-state__message",children:s})]})},j=e=>{let{title:s="Something went wrong",message:a,error:l,onRetry:r,retryText:n="Try Again",fullPage:i=!1,className:c=""}=e;const d=["ui-state","ui-state--error",i&&"ui-state--full-page",c].filter(Boolean).join(" "),u=a||(null===l||void 0===l?void 0:l.message)||"An unexpected error occurred. Please try again.";return(0,t.jsxs)("div",{className:d,role:"alert",children:[(0,t.jsx)("div",{className:"ui-state__icon ui-state__icon--error",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,t.jsx)("circle",{cx:"12",cy:"16",r:"0.5",fill:"currentColor"})]})}),(0,t.jsx)("h3",{className:"ui-state__title",children:s}),(0,t.jsx)("p",{className:"ui-state__message",children:u}),r&&(0,t.jsx)(o,{variant:"primary",onClick:r,className:"ui-state__action",children:n})]})}},6965:(e,s,a)=>{a.d(s,{Z:()=>c});var l=a(1413),r=a(2791),n=a(4677),t=a(4391),i=a(7834),o=a(3263);const c=()=>{const{auth:e,setAuth:s,logout:a}=(0,i.Z)();return(0,r.useEffect)((()=>{const r=n.Z.interceptors.request.use((s=>(s.headers.Authorization||(s.headers.Authorization="Bearer ".concat(null===e||void 0===e?void 0:e.accessToken)),s)),(e=>Promise.reject(e))),i=n.Z.interceptors.response.use((e=>e),(async e=>{var r,i;const c=null===e||void 0===e?void 0:e.config;if(403===(null===(r=e.response)||void 0===r?void 0:r.status)&&(null===c||void 0===c||!c.sent)){c.sent=!0;try{t.Z.log("Token expired, attempting refresh...");const e=(await o.Z.get("/refresh",{withCredentials:!0})).data.accessToken;return s((s=>(0,l.Z)((0,l.Z)({},s),{},{accessToken:e}))),localStorage.setItem("accessToken",e),c.headers.Authorization="Bearer ".concat(e),(0,n.Z)(c)}catch(d){t.Z.error("Token refresh failed:",d),a()}}return 401===(null===(i=e.response)||void 0===i?void 0:i.status)&&a(),Promise.reject(e)}));return()=>{n.Z.interceptors.request.eject(r),n.Z.interceptors.response.eject(i)}}),[e,s,a]),n.Z}},815:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var l=a(1413),r=a(2791),n=a(4677),t=a(4391),i=a(6965),o=a(7689),c=a(1896),d=a(184);const u=()=>{const[e,s]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[u,m]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),[x,v]=(0,r.useState)(null),[j,b]=(0,r.useState)(null),[N,g]=(0,r.useState)(null),[y,f]=(0,r.useState)("all"),[C,_]=(0,r.useState)(""),[w,k]=(0,r.useState)(1),[S]=(0,r.useState)(6),Z=(0,i.Z)(),T=(0,o.s0)(),A=(0,o.TH)(),E=e=>{if(!e||"object"!==typeof e)return"No role";const s=Object.keys(e);return s.length>0?s[0]:"No role"};(0,r.useEffect)((()=>{let s=e;"all"!==y&&(s=e.filter((e=>E(e.roles)===y))),C&&(s=s.filter((e=>{var s,a;return(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(C.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(C.toLowerCase()))||E(e.roles).toLowerCase().includes(C.toLowerCase())}))),n(s),k(1)}),[e,y,C]);const P=w*S,O=P-S,F=a.slice(O,P),U=Math.ceil(a.length/S),R=(()=>{const s={all:e.length,Admin:0,TechnischePlanning:0,TechnischeSchouwer:0,Werkvoorbereider:0,HASPlanning:0,HASMonteur:0,"No role":0};return e.forEach((e=>{const a=E(e.roles);s.hasOwnProperty(a)?s[a]++:s["No role"]++})),s})();(0,r.useEffect)((()=>{const e=new AbortController;return(async()=>{try{m(!0),p(null);const a=await Z.get("/api/users",{signal:e.signal});s(a.data)}catch(l){var a;t.Z.error(l),401===(null===(a=l.response)||void 0===a?void 0:a.status)?T("/login",{state:{from:A},replace:!0}):p("Failed to load users")}finally{m(!1)}})(),()=>{e.abort()}}),[Z,T,A]);return u?(0,d.jsx)(c.Gu,{message:"Loading users..."}):h?(0,d.jsx)(c.Te,{message:h,onRetry:()=>window.location.reload()}):0===e.length?(0,d.jsx)("div",{className:"users-empty",children:(0,d.jsx)("p",{className:"empty-message",children:"No users found"})}):(0,d.jsxs)("div",{className:"users-container",children:[(0,d.jsxs)("div",{className:"users-controls",children:[(0,d.jsxs)("div",{className:"search-container",children:[(0,d.jsx)("input",{type:"text",className:"search-input",placeholder:"Search users by name, email, or role...",value:C,onChange:e=>_(e.target.value)}),(0,d.jsx)("div",{className:"search-icon",children:"\ud83d\udd0d"})]}),(0,d.jsxs)("div",{className:"role-tabs",children:[(0,d.jsxs)("button",{className:"role-tab ".concat("all"===y?"active":""),onClick:()=>f("all"),children:["All Users (",R.all,")"]}),(0,d.jsxs)("button",{className:"role-tab ".concat("Admin"===y?"active":""),onClick:()=>f("Admin"),children:["Admin (",R.Admin,")"]}),(0,d.jsxs)("button",{className:"role-tab ".concat("TechnischePlanning"===y?"active":""),onClick:()=>f("TechnischePlanning"),children:["Tech Planning (",R.TechnischePlanning,")"]}),(0,d.jsxs)("button",{className:"role-tab ".concat("TechnischeSchouwer"===y?"active":""),onClick:()=>f("TechnischeSchouwer"),children:["Tech Inspector (",R.TechnischeSchouwer,")"]}),(0,d.jsxs)("button",{className:"role-tab ".concat("Werkvoorbereider"===y?"active":""),onClick:()=>f("Werkvoorbereider"),children:["Werk. (",R.Werkvoorbereider,")"]}),(0,d.jsxs)("button",{className:"role-tab ".concat("HASPlanning"===y?"active":""),onClick:()=>f("HASPlanning"),children:["HAS Plan (",R.HASPlanning,")"]}),(0,d.jsxs)("button",{className:"role-tab ".concat("HASMonteur"===y?"active":""),onClick:()=>f("HASMonteur"),children:["HAS Mont (",R.HASMonteur,")"]})]})]}),(0,d.jsxs)("div",{className:"results-summary",children:[C&&(0,d.jsxs)("p",{className:"search-results",children:["Found ",a.length,' users matching "',C,'"']}),"all"!==y&&!C&&(0,d.jsxs)("p",{className:"filter-results",children:["Showing ",a.length," users with role: ",(0,d.jsx)("strong",{children:y})]})]}),x&&(0,d.jsx)("div",{className:"modal-overlay",children:(0,d.jsxs)("div",{className:"modal-content",children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Edit User"}),(0,d.jsx)("button",{className:"modal-close",onClick:()=>v(null),children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),g("edit");try{const a={name:x.name,email:x.email,roles:x.roleToEdit?[x.roleToEdit]:[],color:x.color||"#3498db"};x.password.trim()&&(a.password=x.password),await Z.put("/api/users/".concat(x._id),a),s(e.map((e=>e._id===x._id?(0,l.Z)((0,l.Z)((0,l.Z)({},e),a),{},{roles:{[x.roleToEdit]:e.roles[E(e.roles)]}}):e))),v(null)}catch(r){t.Z.error("Error updating user:",r),p("Failed to update user")}finally{g(null)}},className:"modal-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Name"}),(0,d.jsx)("input",{type:"text",className:"modern-input",value:x.name,onChange:e=>v((0,l.Z)((0,l.Z)({},x),{},{name:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Email"}),(0,d.jsx)("input",{type:"email",className:"modern-input",value:x.email,onChange:e=>v((0,l.Z)((0,l.Z)({},x),{},{email:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Password (leave empty to keep current)"}),(0,d.jsx)("input",{type:"password",className:"modern-input",value:x.password,onChange:e=>v((0,l.Z)((0,l.Z)({},x),{},{password:e.target.value})),placeholder:"Enter new password or leave empty"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Role"}),(0,d.jsxs)("select",{className:"modern-select",value:x.roleToEdit,onChange:e=>v((0,l.Z)((0,l.Z)({},x),{},{roleToEdit:e.target.value})),required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select a role"}),(0,d.jsx)("option",{value:"Admin",children:"Admin"}),(0,d.jsx)("option",{value:"TechnischePlanning",children:"Technische Planning"}),(0,d.jsx)("option",{value:"TechnischeSchouwer",children:"Technische Schouwer"}),(0,d.jsx)("option",{value:"Werkvoorbereider",children:"Werkvoorbereider"}),(0,d.jsx)("option",{value:"HASPlanning",children:"HAS Planning"}),(0,d.jsx)("option",{value:"HASMonteur",children:"HAS Monteur"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"User Color"}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,d.jsx)("input",{type:"color",className:"color-picker",value:x.color||"#3498db",onChange:e=>v((0,l.Z)((0,l.Z)({},x),{},{color:e.target.value})),style:{width:"50px",height:"40px",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer"}}),(0,d.jsx)("input",{type:"text",className:"modern-input",value:x.color||"#3498db",onChange:e=>v((0,l.Z)((0,l.Z)({},x),{},{color:e.target.value})),placeholder:"#3498db",pattern:"^#[0-9A-Fa-f]{6}$",title:"Enter a valid hex color code (e.g., #3498db)",style:{flex:"1"}}),(0,d.jsx)("div",{style:{width:"30px",height:"30px",backgroundColor:x.color||"#3498db",border:"1px solid #ddd",borderRadius:"4px"},title:"Color preview"})]})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",className:"modern-button modern-button-secondary",onClick:()=>v(null),children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"modern-button modern-button-primary",disabled:"edit"===N,children:"edit"===N?"Saving...":"Save Changes"})]})]})]})}),j&&(0,d.jsx)("div",{className:"modal-overlay",children:(0,d.jsxs)("div",{className:"modal-content",children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Delete User"}),(0,d.jsx)("button",{className:"modal-close",onClick:()=>b(null),children:"\xd7"})]}),(0,d.jsxs)("div",{className:"modal-body",children:[(0,d.jsxs)("p",{children:["Are you sure you want to delete user ",(0,d.jsx)("strong",{children:j.name}),"?"]}),(0,d.jsx)("p",{children:"This action cannot be undone."})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modern-button modern-button-secondary",onClick:()=>b(null),children:"Cancel"}),(0,d.jsx)("button",{className:"modern-button modern-button-danger",onClick:()=>(async a=>{g("delete");try{await Z.delete("/api/users/".concat(a)),s(e.filter((e=>e._id!==a))),b(null)}catch(l){t.Z.error("Error deleting user:",l),p("Failed to delete user")}finally{g(null)}})(j._id),disabled:"delete"===N,children:"delete"===N?"Deleting...":"Delete User"})]})]})}),(0,d.jsx)("div",{className:"users-grid",children:F.map((e=>(0,d.jsxs)("div",{className:"user-card",children:[(0,d.jsxs)("div",{className:"user-info",children:[(0,d.jsxs)("div",{className:"user-name",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,d.jsx)("div",{className:"user-color-indicator",style:{width:"16px",height:"16px",backgroundColor:e.color||"#3498db",border:"1px solid #ddd",borderRadius:"50%",flexShrink:0},title:"User color: ".concat(e.color||"#3498db")}),(null===e||void 0===e?void 0:e.name)||"Unknown User"]}),(0,d.jsx)("div",{className:"user-email",children:e.email}),(0,d.jsx)("div",{className:"user-role",children:(0,d.jsx)("span",{className:"role-badge role-".concat(E(e.roles).toLowerCase()),children:E(e.roles)})})]}),(0,d.jsxs)("div",{className:"user-actions",children:[(0,d.jsx)("button",{className:"action-button edit-button",title:"Edit user",onClick:()=>(e=>{v((0,l.Z)((0,l.Z)({},e),{},{password:"",roleToEdit:E(e.roles),color:e.color||"#3498db"}))})(e),children:"\u270f\ufe0f"}),(0,d.jsx)("button",{className:"action-button delete-button",title:"Delete user",onClick:()=>b(e),children:"\ud83d\uddd1\ufe0f"})]})]},e._id)))}),U>1&&(0,d.jsxs)("div",{className:"pagination",children:[(0,d.jsx)("button",{className:"pagination-btn",onClick:()=>k((e=>Math.max(e-1,1))),disabled:1===w,children:"\u2190 Previous"}),(0,d.jsx)("div",{className:"page-numbers",children:[...Array(U)].map(((e,s)=>(0,d.jsx)("button",{className:"page-number ".concat(w===s+1?"active":""),onClick:()=>k(s+1),children:s+1},s+1)))}),(0,d.jsx)("button",{className:"pagination-btn",onClick:()=>k((e=>Math.min(e+1,U))),disabled:w===U,children:"Next \u2192"})]}),0===a.length&&!u&&(0,d.jsxs)("div",{className:"users-empty",children:[(0,d.jsx)("p",{className:"empty-message",children:C||"all"!==y?"No users found matching your criteria":"No users found"}),(C||"all"!==y)&&(0,d.jsx)("button",{className:"modern-button modern-button-secondary",onClick:()=>{_(""),f("all")},children:"Clear Filters"})]})]})};a(8815);const m=()=>{const[e,s]=(0,r.useState)({name:!1,email:!1,password:!1,role:!1}),[a,i]=(0,r.useState)({name:"",email:"",password:"",roles:[],color:"#3498db"}),[o,c]=(0,r.useState)([]),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[b,N]=(0,r.useState)(0),[g,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=(await n.Z.get("/api/users/roles")).data;c(e)}catch(e){t.Z.error("Failed to fetch roles:",e)}})()}),[]);const f=e=>{const{name:s,value:r}=e.target;i((0,l.Z)((0,l.Z)({},a),{},{[s]:r}))};return(0,d.jsx)("div",{className:"admin-dashboard",children:(0,d.jsxs)("div",{className:"admin-container",children:[(0,d.jsxs)("div",{className:"admin-header",children:[(0,d.jsx)("h1",{className:"admin-title",children:"Admin Dashboard"}),(0,d.jsx)("p",{className:"admin-subtitle",children:"Manage users and system settings"})]}),(0,d.jsx)("div",{className:"admin-content",children:(0,d.jsxs)("div",{className:"admin-card users-main-card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"card-header-content",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"card-title",children:"User Management"}),(0,d.jsx)("p",{className:"card-subtitle",children:"Manage existing users and create new ones"})]}),(0,d.jsx)("button",{className:"toggle-create-btn ".concat(g?"active":""),onClick:()=>y(!g),children:g?"\u2212 Cancel":"+ Create User"})]})}),(0,d.jsx)("div",{className:"create-form-container ".concat(g?"expanded":""),children:(0,d.jsxs)("div",{className:"create-form-content",children:[(0,d.jsx)("h3",{className:"create-form-title",children:"Create New User"}),(0,d.jsxs)("form",{className:"modern-form",onSubmit:async e=>{e.preventDefault(),x(""),j("");const l={name:!a.name,email:!a.email||(r=a.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)),password:!a.password,role:!a.roles.length};var r;s(l);if(!Object.values(l).some((e=>e)))try{h(!0),await n.Z.post("/api/users",a),i({name:"",email:"",password:"",roles:[],color:"#3498db"}),x("User created successfully!"),N((e=>e+1)),y(!1),setTimeout((()=>x("")),3e3)}catch(d){var o,c;t.Z.error("Error adding user:",d.response?d.response.data:d),j((null===(o=d.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message)||"Failed to create user. Please try again."),setTimeout((()=>j("")),5e3)}finally{h(!1)}},children:[(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),(0,d.jsx)("input",{id:"name",type:"text",className:"modern-input",placeholder:"Enter full name",name:"name",value:a.name,onChange:f,required:!0}),e.name&&(0,d.jsx)("span",{className:"form-error",children:"Name is required"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,d.jsx)("input",{id:"email",type:"email",className:"modern-input",placeholder:"Enter email address",name:"email",value:a.email,onChange:f,required:!0}),e.email&&(0,d.jsx)("span",{className:"form-error",children:a.email?"Invalid email format":"Email is required"})]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,d.jsx)("input",{id:"password",type:"password",className:"modern-input",placeholder:"Enter password",name:"password",value:a.password,onChange:f,required:!0}),e.password&&(0,d.jsx)("span",{className:"form-error",children:"Password is required"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"role",className:"form-label",children:"Role"}),(0,d.jsxs)("select",{id:"role",className:"modern-select",name:"roles",value:a.roles[0]||"",onChange:e=>{const{value:s}=e.target;i((0,l.Z)((0,l.Z)({},a),{},{roles:[s]}))},required:!0,children:[(0,d.jsx)("option",{value:"",disabled:!0,children:"Select a role"}),o.map((e=>(0,d.jsx)("option",{value:e.role,children:e.role},e.value)))]}),e.role&&(0,d.jsx)("span",{className:"form-error",children:"Role is required"})]})]}),(0,d.jsx)("div",{className:"form-row",children:(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"color",className:"form-label",children:"User Color"}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,d.jsx)("input",{id:"color",type:"color",className:"color-picker",value:a.color,onChange:e=>i((0,l.Z)((0,l.Z)({},a),{},{color:e.target.value})),style:{width:"50px",height:"40px",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer"}}),(0,d.jsx)("input",{type:"text",className:"modern-input",value:a.color,onChange:e=>i((0,l.Z)((0,l.Z)({},a),{},{color:e.target.value})),placeholder:"#3498db",pattern:"^#[0-9A-Fa-f]{6}$",title:"Enter a valid hex color code (e.g., #3498db)",style:{flex:"1"}}),(0,d.jsx)("div",{style:{width:"30px",height:"30px",backgroundColor:a.color,border:"1px solid #ddd",borderRadius:"4px"},title:"Color preview"})]})]})}),p&&(0,d.jsxs)("div",{className:"success-message",children:["\u2705 ",p]}),v&&(0,d.jsxs)("div",{className:"error-message",children:["\u274c ",v]}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"button",className:"modern-button modern-button-secondary",onClick:()=>y(!1),children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"modern-button modern-button-primary",disabled:m,children:m?"Creating User...":"Create User"})]})]})]})}),(0,d.jsx)("div",{className:"users-list-container",children:(0,d.jsx)(u,{},b)})]})})]})})}},8815:()=>{},5987:(e,s,a)=>{a.d(s,{Z:()=>r});var l=a(3366);function r(e,s){if(null==e)return{};var a,r,n=(0,l.Z)(e,s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)a=t[r],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}}}]);
//# sourceMappingURL=815.a8c9d426.chunk.js.map