"use strict";(self.webpackChunkdynet=self.webpackChunkdynet||[]).push([[621],{4677:(e,a,l)=>{l.d(a,{Z:()=>d,y:()=>n});var s=l(3263);const i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"https://backend-dynet2-1.onrender.com",n=s.Z.create({baseURL:i,headers:{"Content-Type":"application/json"},withCredentials:!0}),t=s.Z.create({baseURL:i,headers:{"Content-Type":"application/json"},withCredentials:!0});t.interceptors.response.use((e=>e),(async e=>{var a;return 401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("accessToken"),localStorage.removeItem("roles"),window.location.href="/login"),Promise.reject(e)}));const d=t},1896:(e,a,l)=>{l.d(a,{VF:()=>u,sm:()=>v,Te:()=>f,Gu:()=>j});var s=l(1413),i=l(5987),n=l(2791),t=l(184);const d=["children","variant","size","type","loading","disabled","fullWidth","icon","onClick","className"],r=e=>{let{children:a,variant:l="primary",size:n="medium",type:r="button",loading:c=!1,disabled:o=!1,fullWidth:m=!1,icon:h=null,onClick:x,className:v=""}=e,u=(0,i.Z)(e,d);const j=["ui-button","ui-button--".concat(l),"ui-button--".concat(n),m&&"ui-button--full-width",c&&"ui-button--loading",v].filter(Boolean).join(" ");return(0,t.jsxs)("button",(0,s.Z)((0,s.Z)({type:r,className:j,disabled:o||c,onClick:x},u),{},{children:[c&&(0,t.jsx)("span",{className:"ui-button__spinner","aria-hidden":"true",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"ui-button__spinner-icon",children:(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeDasharray:"31.4 31.4"})})}),h&&!c&&(0,t.jsx)("span",{className:"ui-button__icon",children:h}),(0,t.jsx)("span",{className:"ui-button__text",children:a})]}))},c=["label","type","placeholder","value","onChange","onBlur","error","helperText","required","disabled","readOnly","icon","className","id","name"],o=(0,n.forwardRef)(((e,a)=>{let{label:l,type:n="text",placeholder:d,value:r,onChange:o,onBlur:m,error:h,helperText:x,required:v=!1,disabled:u=!1,readOnly:j=!1,icon:f=null,className:N="",id:g,name:p}=e,b=(0,i.Z)(e,c);const F=g||p||"input-".concat(Math.random().toString(36).substr(2,9)),y=["ui-input__field",h&&"ui-input__field--error",f&&"ui-input__field--with-icon",N].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:"ui-input",children:[l&&(0,t.jsxs)("label",{htmlFor:F,className:"ui-input__label",children:[l,v&&(0,t.jsx)("span",{className:"ui-input__required",children:"*"})]}),(0,t.jsxs)("div",{className:"ui-input__wrapper",children:[f&&(0,t.jsx)("span",{className:"ui-input__icon",children:f}),(0,t.jsx)("input",(0,s.Z)({ref:a,id:F,name:p,type:n,placeholder:d,value:r,onChange:o,onBlur:m,disabled:u,readOnly:j,required:v,className:y,"aria-invalid":!!h,"aria-describedby":h?"".concat(F,"-error"):x?"".concat(F,"-helper"):void 0},b))]}),h&&(0,t.jsx)("span",{id:"".concat(F,"-error"),className:"ui-input__error",role:"alert",children:h}),x&&!h&&(0,t.jsx)("span",{id:"".concat(F,"-helper"),className:"ui-input__helper",children:x})]})}));o.displayName="Input";const m=["children","title","subtitle","icon","actions","variant","padding","className","onClick","hoverable"],h=e=>{let{children:a,title:l,subtitle:n,icon:d,actions:r,variant:c="default",padding:o="medium",className:h="",onClick:x,hoverable:v=!1}=e,u=(0,i.Z)(e,m);const j=["ui-card","ui-card--".concat(c),"ui-card--padding-".concat(o),v&&"ui-card--hoverable",x&&"ui-card--clickable",h].filter(Boolean).join(" "),f=x?"button":"div";return(0,t.jsxs)(f,(0,s.Z)((0,s.Z)({className:j,onClick:x,type:x?"button":void 0},u),{},{children:[(l||d||r)&&(0,t.jsxs)("div",{className:"ui-card__header",children:[(0,t.jsxs)("div",{className:"ui-card__header-content",children:[d&&(0,t.jsx)("span",{className:"ui-card__icon",children:d}),(0,t.jsxs)("div",{className:"ui-card__titles",children:[l&&(0,t.jsx)("h3",{className:"ui-card__title",children:l}),n&&(0,t.jsx)("p",{className:"ui-card__subtitle",children:n})]})]}),r&&(0,t.jsx)("div",{className:"ui-card__actions",children:r})]}),(0,t.jsx)("div",{className:"ui-card__content",children:a})]}))};h.Footer=e=>{let{children:a,className:l=""}=e;return(0,t.jsx)("div",{className:"ui-card__footer ".concat(l),children:a})};const x=e=>{let{open:a,onClose:l,title:s,children:i,size:d="medium",showCloseButton:r=!0,closeOnOverlayClick:c=!0,closeOnEscape:o=!0,footer:m,className:h=""}=e;const x=(0,n.useCallback)((e=>{"Escape"===e.key&&o&&l()}),[o,l]);if((0,n.useEffect)((()=>(a&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow=""})),[a,x]),!a)return null;return(0,t.jsx)("div",{className:"ui-modal__overlay",onClick:e=>{e.target===e.currentTarget&&c&&l()},role:"dialog","aria-modal":"true",children:(0,t.jsxs)("div",{className:"ui-modal ui-modal--".concat(d," ").concat(h),children:[(s||r)&&(0,t.jsxs)("div",{className:"ui-modal__header",children:[s&&(0,t.jsx)("h2",{className:"ui-modal__title",children:s}),r&&(0,t.jsx)("button",{className:"ui-modal__close",onClick:l,"aria-label":"Close modal",children:"\u2715"})]}),(0,t.jsx)("div",{className:"ui-modal__content",children:i}),m&&(0,t.jsx)("div",{className:"ui-modal__footer",children:m})]})})},v=e=>{let{open:a,onClose:l,onConfirm:s,title:i="Confirm Action",message:n,confirmText:d="Confirm",cancelText:c="Cancel",variant:o="danger",loading:m=!1}=e;return(0,t.jsx)(x,{open:a,onClose:l,title:i,size:"small",footer:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{variant:"secondary",onClick:l,disabled:m,children:c}),(0,t.jsx)(r,{variant:o,onClick:s,loading:m,children:d})]}),children:(0,t.jsx)("p",{className:"ui-modal__message",children:n})})},u=e=>{let{open:a,onClose:l,title:s="Alert",message:i,buttonText:n="OK",variant:d="primary"}=e;return(0,t.jsx)(x,{open:a,onClose:l,title:s,size:"small",footer:(0,t.jsx)(r,{variant:d,onClick:l,children:n}),children:(0,t.jsx)("p",{className:"ui-modal__message",children:i})})},j=e=>{let{message:a="Loading...",size:l="medium",fullPage:s=!1,className:i=""}=e;const n=["ui-state","ui-state--loading","ui-state--".concat(l),s&&"ui-state--full-page",i].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:n,role:"status","aria-live":"polite",children:[(0,t.jsx)("div",{className:"ui-state__spinner",children:(0,t.jsx)("svg",{viewBox:"0 0 50 50",className:"ui-state__spinner-icon",children:(0,t.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"31.4 31.4"})})}),a&&(0,t.jsx)("p",{className:"ui-state__message",children:a})]})},f=e=>{let{title:a="Something went wrong",message:l,error:s,onRetry:i,retryText:n="Try Again",fullPage:d=!1,className:c=""}=e;const o=["ui-state","ui-state--error",d&&"ui-state--full-page",c].filter(Boolean).join(" "),m=l||(null===s||void 0===s?void 0:s.message)||"An unexpected error occurred. Please try again.";return(0,t.jsxs)("div",{className:o,role:"alert",children:[(0,t.jsx)("div",{className:"ui-state__icon ui-state__icon--error",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,t.jsx)("circle",{cx:"12",cy:"16",r:"0.5",fill:"currentColor"})]})}),(0,t.jsx)("h3",{className:"ui-state__title",children:a}),(0,t.jsx)("p",{className:"ui-state__message",children:m}),i&&(0,t.jsx)(r,{variant:"primary",onClick:i,className:"ui-state__action",children:n})]})}},6965:(e,a,l)=>{l.d(a,{Z:()=>c});var s=l(1413),i=l(2791),n=l(4677),t=l(4391),d=l(7834),r=l(3263);const c=()=>{const{auth:e,setAuth:a,logout:l}=(0,d.Z)();return(0,i.useEffect)((()=>{const i=n.Z.interceptors.request.use((a=>(a.headers.Authorization||(a.headers.Authorization="Bearer ".concat(null===e||void 0===e?void 0:e.accessToken)),a)),(e=>Promise.reject(e))),d=n.Z.interceptors.response.use((e=>e),(async e=>{var i,d;const c=null===e||void 0===e?void 0:e.config;if(403===(null===(i=e.response)||void 0===i?void 0:i.status)&&(null===c||void 0===c||!c.sent)){c.sent=!0;try{t.Z.log("Token expired, attempting refresh...");const e=(await r.Z.get("/refresh",{withCredentials:!0})).data.accessToken;return a((a=>(0,s.Z)((0,s.Z)({},a),{},{accessToken:e}))),localStorage.setItem("accessToken",e),c.headers.Authorization="Bearer ".concat(e),(0,n.Z)(c)}catch(o){t.Z.error("Token refresh failed:",o),l()}}return 401===(null===(d=e.response)||void 0===d?void 0:d.status)&&l(),Promise.reject(e)}));return()=>{n.Z.interceptors.request.eject(i),n.Z.interceptors.response.eject(d)}}),[e,a,l]),n.Z}},2621:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var s=l(1413),i=l(2791),n=l(7689),t=l(6965),d=l(184);const r=e=>{var a;let{form:l}=e;const s=l.floors.length;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsx)("div",{className:"flat",children:(0,d.jsx)("div",{className:"rightFlatLineStairs"})},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)("div",{className:"rightFlatLineStairsLast"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)("div",{className:"rightFlatLineStairs"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):void 0))}),s>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"rightWingLineShort"}),(0,d.jsx)("div",{className:"rightWingLineRotated"})]})]}),(0,d.jsx)("div",{className:"basement"})]})},c=e=>{var a;let{form:l}=e;const s=l.floors.length;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart mainPartReversed",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0===a?(0,d.jsx)("div",{className:"flat",children:(0,d.jsx)("div",{className:"leftFlatLineStairs"})},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)("div",{className:"leftFlatLineStairsLast"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)("div",{className:"leftFlatLineStairs"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):void 0))}),s>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"leftWingLineShort"}),(0,d.jsx)("div",{className:"leftWingLineRotated"})]})]}),(0,d.jsx)("div",{className:"basement"})]})},o=e=>{var a;let{form:l}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsx)("div",{className:"mainPart",children:(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>a!==l.length-1?(0,d.jsx)("div",{className:"flat",children:(0,d.jsx)("div",{className:"noStairsLineAllFlats"})},a):a===l.length-1?(0,d.jsx)("div",{className:"flat",children:(0,d.jsx)("div",{className:"noStairsLineHighestFlat"})},a):void 0))})}),(0,d.jsx)("div",{className:"basement"})]})},m=e=>{var a,l,s,i,n,t;let{index:r,parentIndex:c,building:o,handleFlatDetails:m,formFields:h}=e;return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"flat".concat(r)}),(0,d.jsxs)("select",{id:"flat".concat(r),name:"flat",onChange:e=>{m(e,r,c)},value:"".concat(null===(a=h[c])||void 0===a||null===(l=a.floors[r])||void 0===l?void 0:l.flat),children:[(0,d.jsx)("option",{value:""}),o.flats.length>0&&o.flats.map(((e,a)=>(0,d.jsx)("option",{value:e._id,children:e.toevoeging},a)))]}),(0,d.jsx)("input",{id:"cableNumber".concat(r),placeholder:"CN",className:"cableNumber",type:"number",name:"cableNumber",value:"".concat(null===(s=h[c])||void 0===s||null===(i=s.floors[r])||void 0===i?void 0:i.cableNumber),onChange:e=>{m(e,r,c)}}),(0,d.jsx)("input",{id:"cableLength".concat(r),placeholder:"CL",className:"cableLength",type:"number",name:"cableLength",value:"".concat(null===(n=h[c])||void 0===n||null===(t=n.floors[r])||void 0===t?void 0:t.cableLength),onChange:e=>{m(e,r,c)}})]})},h={leftWing:e=>{var a;let{form:l,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart mainPartReversed",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0===a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatLineStairs"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatLineStairsLast"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):0!==a||a!==l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatLineStairs"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):void 0))}),l.floors.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"leftWingLineShort"}),(0,d.jsx)("div",{className:"leftWingLineRotated"})]})]}),(0,d.jsx)("div",{className:"basement"})]})},noStairs:e=>{var a;let{form:l,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsx)("div",{className:"mainPart",children:(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>a!==l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"noStairsLineAllFlats"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"noStairsLineHighestFlat"})]},a):void 0))})}),(0,d.jsx)("div",{className:"basement"})]})},rightWing:e=>{var a;let{form:l,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}=e;const r=l.floors.length;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairs"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairsLast"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairs"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):void 0))}),r>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"rightWingLineShort"}),(0,d.jsx)("div",{className:"rightWingLineRotated"})]})]}),(0,d.jsx)("div",{className:"basement"})]})},leftWingApart:e=>{var a;let{form:l,building:s,parentIndex:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart mainPartReversed",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:s,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatSeparateLine"}),(0,d.jsx)("div",{className:"leftFlatLineStairsStart"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:s,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatLineStairsLast"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):0!==a||a!==l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:s,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatLineStairs"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})},rightWingApart:e=>{var a;let{form:l,building:s,parentIndex:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0===a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:s,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairsStart"}),(0,d.jsx)("div",{className:"rightFlatSeparateLine"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:s,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairsLast"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):0!==a||a!==l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:s,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairs"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})},leftWingNoBG:e=>{var a;let{form:l,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart mainPartReversed",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsx)("div",{className:"emptyFlat",children:(0,d.jsx)("div",{className:"leftFlatLineStairsStart"})},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatLineStairsLast"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"leftFlatLineStairs"}),(0,d.jsx)("div",{className:"leftFlatEntranceLine"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})},rightWingNoBG:e=>{var a;let{form:l,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsx)("div",{className:"emptyFlat",children:(0,d.jsx)("div",{className:"rightFlatLineStairsStart"})},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairsLast"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightFlatLineStairs"}),(0,d.jsx)("div",{className:"rightFlatEntranceLine"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})},doubleNoBGsWing:e=>{var a,l;let{form:s,parentIndex:i,building:n,formFields:t,handleFlat:r}=e;s.floors.length;return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"flatsContainer",children:null===s||void 0===s||null===(a=s.floors)||void 0===a?void 0:a.map(((e,a,l)=>0===a?(0,d.jsx)("div",{className:"emptyFlat",children:(0,d.jsx)("div",{className:"doubleSideBGLine"})},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlat:r}),(0,d.jsx)("div",{className:"doubleSideTopLine"}),(0,d.jsx)("div",{className:"doubleSideEntranceLineLeft"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlat:r}),(0,d.jsx)("div",{className:"doubleSideAllLine"}),(0,d.jsx)("div",{className:"doubleSideEntranceLineLeft"})]},a):void 0))}),(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===s||void 0===s||null===(l=s.floors)||void 0===l?void 0:l.map(((e,a,l)=>0==a?(0,d.jsx)("div",{className:"emptyFlat"},a):a===l.length-1||0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlat:r}),(0,d.jsx)("div",{className:"doubleSideEntranceLineRight"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})})},doubleNoRightBGWing:e=>{var a,l;let{form:s,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}=e;return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"flatsContainer",children:null===s||void 0===s||null===(a=s.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideBGLine"}),(0,d.jsx)("div",{className:"doubleSideNoBGLeftEntrance"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideTopLine"}),(0,d.jsx)("div",{className:"doubleSideEntranceLineLeft"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideAllLine"}),(0,d.jsx)("div",{className:"doubleSideEntranceLineLeft"})]},a):void 0))}),(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===s||void 0===s||null===(l=s.floors)||void 0===l?void 0:l.map(((e,a,l)=>0==a?(0,d.jsx)("div",{className:"emptyFlat"},a):a===l.length-1||0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideEntranceLineRight"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})})},doubleNoLeftBGWing:e=>{var a,l;let{form:s,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}=e;return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"flatsContainer",children:null===s||void 0===s||null===(a=s.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsx)("div",{className:"emptyFlat",children:(0,d.jsx)("div",{className:"doubleSideBGLine"})},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideTopLine"}),(0,d.jsx)("div",{className:"doubleSideEntranceLineLeft"})]},a):0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideAllLine"}),(0,d.jsx)("div",{className:"doubleSideEntranceLineLeft"})]},a):void 0))}),(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===s||void 0===s||null===(l=s.floors)||void 0===l?void 0:l.map(((e,a,l)=>0==a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideNoBGRightEntrance"})]},a):a===l.length-1||0!==a||a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:i,building:n,formFields:t,handleFlatDetails:r}),(0,d.jsx)("div",{className:"doubleSideEntranceLineRight"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})})},leftWingFlat:e=>{var a;let{form:l,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart mainPartReversed",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)("div",{className:"flat",children:(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t})},a),(0,d.jsx)("div",{className:"leftStraightFlatBasementLine"}),(0,d.jsx)("div",{className:"leftStraightFlatVerticalLine"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)("div",{className:"flat",children:(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t})},a),(0,d.jsx)("div",{className:"leftStraightFlatVerticalLineLast"})]},a):0!==a||a!==l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)("div",{className:"flat",children:(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t})},a),(0,d.jsx)("div",{className:"leftStraightFlatVerticalLine"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})},rightWingFlat:e=>{var a;let{form:l,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}=e;return(0,d.jsxs)("div",{className:"block",children:[(0,d.jsxs)("div",{className:"mainPart",children:[(0,d.jsx)("div",{className:"stairs"}),(0,d.jsx)("div",{className:"flatsContainer",children:null===l||void 0===l||null===(a=l.floors)||void 0===a?void 0:a.map(((e,a,l)=>0==a?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightStraightFlatBasementLine"}),(0,d.jsx)("div",{className:"rightStraightFlatVerticalLine"})]},a):a===l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightStraightFlatVerticalLineLast"})]},a):0!==a||a!==l.length-1?(0,d.jsxs)("div",{className:"flat",children:[(0,d.jsx)(m,{index:a,parentIndex:s,building:i,formFields:n,handleFlatDetails:t}),(0,d.jsx)("div",{className:"rightStraightFlatVerticalLine"})]},a):void 0))})]}),(0,d.jsx)("div",{className:"basement"})]})}},x=e=>{let{form:a,building:l,parentIndex:s,formFields:i,handleFlatDetails:n}=e;const t=h[a.blockType];return t?(0,d.jsx)(t,{form:a,building:l,parentIndex:s,formFields:i,handleFlatDetails:n}):null};var v=l(1896),u=l(2994),j=l(4391);const f=[{value:"",label:"Select floor"},{value:0,label:"BG"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],N={firstFloor:0,topFloor:"",blockType:"",floors:[]},g=()=>{const e=(0,n.UO)(),a=(0,t.Z)(),{showSuccess:l,showError:m}=(0,u.l)(),[h,g]=(0,i.useState)(!0),[p,b]=(0,i.useState)(!1),[F,y]=(0,i.useState)(!1),[L,S]=(0,i.useState)({}),[C,k]=(0,i.useState)(!0),[_,I]=(0,i.useState)([]),[D,T]=(0,i.useState)(""),[E,P]=(0,i.useState)([]),[W,Z]=(0,i.useState)({}),[B,w]=(0,i.useState)([(0,s.Z)({},N)]),[R,O]=(0,i.useState)({isOpen:!1,index:null}),A=(0,i.useCallback)((async()=>{g(!0);try{var l,s;const{data:i}=await a.get("/api/building/".concat(e.id));S(i),null!==(l=i.layout)&&void 0!==l&&null!==(s=l.blocks)&&void 0!==s&&s.length&&(w(i.layout.blocks),k(!1))}catch(i){j.Z.error("Failed to fetch building:",i),m("Failed to load building data. Please try again.")}finally{g(!1)}}),[e.id,a,m]);(0,i.useEffect)((()=>{A()}),[A]);const G=(e,a,l)=>{let s=[...B];s[l].floors[a][e.target.name]="cableNumber"===e.target.name||"cableLength"===e.target.name?parseInt(e.target.value,10):e.target.value,w(s)},q=(e,a)=>{let l=[...B];if(l[a].blockType&&!isNaN(l[a].topFloor)){let e=[];for(let s=l[a].firstFloor;s<=l[a].topFloor;s++)e.push({floor:s});l[a].floors=[...e]}l[a][e.target.name]=e.target.value,w(l)},z=async s=>{s.preventDefault();if(B.some((e=>!e.blockType||""===e.topFloor)))m("Please complete all block configurations before saving.");else{b(!0);try{const s={headers:{"Content-Type":"application/json"}};C?(await a.post("/api/building/layout/".concat(e.id),B,s),k(!1),l("Layout created successfully!")):(await a.put("/api/building/layout/".concat(e.id),B,s),l("Layout updated successfully!"))}catch(t){var i,n;j.Z.error("Failed to save layout:",t),m((null===(i=t.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)||"Failed to save layout. Please try again.")}finally{b(!1)}}};return h?(0,d.jsx)("div",{className:"buildingPageContainer",children:(0,d.jsxs)("div",{className:"loading-spinner",children:[(0,d.jsx)("div",{className:"spinner"}),(0,d.jsx)("p",{children:"Loading building data..."})]})}):(0,d.jsxs)("div",{className:"buildingPageContainer",children:[(0,d.jsxs)("h1",{children:["Building Page ",L.name&&"- ".concat(L.name)]}),(0,d.jsx)("form",{onSubmit:z,children:B.map(((e,a)=>(0,d.jsxs)("div",{className:"block-card",children:[(0,d.jsxs)("h3",{children:["Block ",a+1]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"topFloor-".concat(a),children:"Choose Top Floor"}),(0,d.jsx)("select",{id:"topFloor-".concat(a),name:"topFloor",onChange:e=>((e,a)=>{let l=[...B];if(l[a][e.target.name]=Number(e.target.value),!isNaN(l[a].topFloor)){let e=[];for(let s=l[a].firstFloor;s<=l[a].topFloor;s++)e.push({floor:s});l[a].floors=[...e]}w(l)})(e,a),value:e.topFloor,className:"form-select",children:f.map((e=>(0,d.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,d.jsxs)("div",{className:"schemasContainer",children:[(0,d.jsx)("div",{className:"wingContainer",children:(0,d.jsxs)("label",{htmlFor:"leftWing".concat(a),children:[(0,d.jsx)("input",{id:"leftWing".concat(a),type:"checkbox",name:"blockType",value:"leftWing",checked:"leftWing"===e.blockType,onChange:e=>q(e,a)}),(0,d.jsx)(c,{form:e})]})}),(0,d.jsx)("div",{className:"noStairsContainer",children:(0,d.jsxs)("label",{htmlFor:"noStairs".concat(a),children:[(0,d.jsx)("input",{id:"noStairs".concat(a),type:"checkbox",name:"blockType",value:"noStairs",checked:"noStairs"===e.blockType,onChange:e=>q(e,a)}),(0,d.jsx)(o,{form:e})]})}),(0,d.jsx)("div",{className:"wingContainer",children:(0,d.jsxs)("label",{htmlFor:"rightWing".concat(a),children:[(0,d.jsx)("input",{id:"rightWing".concat(a),type:"checkbox",name:"blockType",value:"rightWing",checked:"rightWing"===e.blockType,onChange:e=>q(e,a)}),(0,d.jsx)(r,{form:e})]})})]}),(0,d.jsx)("button",{className:"btn btn-danger",onClick:e=>((e,a)=>{e.preventDefault(),1!==B.length?O({isOpen:!0,index:a}):m("You must have at least one block.")})(e,a),disabled:1===B.length,children:"Remove Block"})]},"block-".concat(a,"-").concat(e.blockType))))}),(0,d.jsxs)("div",{className:"button-group",children:[(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>{w([...B,(0,s.Z)({},N)])},children:"+ Add More Block"}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:z,disabled:p,children:p?"Saving...":C?"Create Layout":"Update Layout"})]}),(0,d.jsx)("h2",{children:"Completed Layout of the Building"}),(0,d.jsx)("div",{className:"completeSchemaContainer",children:B.map(((e,a)=>(0,d.jsx)("div",{className:"".concat("leftWing"===e.blockType||"rightWing"===e.blockType||"leftWingNoBG"===e.blockType||"rightWingNoBG"===e.blockType||"leftWingFlat"===e.blockType||"rightWingFlat"===e.blockType?"wingContainer":"","\n            ").concat("noStairs"===e.blockType?"noStairsContainer":""),children:(0,d.jsx)(x,{form:e,building:L,parentIndex:a,formFields:B,handleFlatDetails:G})},"schema-".concat(a,"-").concat(e.blockType))))}),(0,d.jsxs)("div",{className:"cablesContainer",children:[(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>{const e=B.map((e=>e.floors.map((e=>e.cableNumber))));I([...new Set(e.flat())])},children:"Show Cable Numbers"}),(0,d.jsx)("div",{className:"cableNumbersContainer",children:_.map((e=>(0,d.jsxs)("button",{className:"cable-btn ".concat(e===D?"selectedCable":""),onClick:()=>{T(e),(e=>{const a=[];B.forEach((l=>{l.floors.forEach((l=>{l.cableNumber===e&&a.push(l.flat)}))})),P(a),Z((0,s.Z)((0,s.Z)({},W),{},{cableNumber:e,flats:a}))})(e)},children:["Cable ",e]},"cable-".concat(e))))}),E.length>0&&(0,d.jsxs)("div",{className:"currentCableFlatsContainer",children:[(0,d.jsx)("h4",{children:"Connected Flats:"}),(0,d.jsx)("div",{className:"flats-list",children:E.map(((e,a)=>(0,d.jsx)("span",{className:"flat-badge",children:e},"flat-".concat(e,"-").concat(a))))})]}),_.length>0&&(0,d.jsxs)("div",{className:"schedule-card",children:[(0,d.jsxs)("h3",{className:"schedule-title",children:[(0,d.jsx)("span",{children:"\ud83d\udcc5"}),"Schedule Installation"]}),(0,d.jsxs)("form",{onSubmit:async s=>{var i;if(s.preventDefault(),W.date&&W.from&&W.till)if(W.cableNumber&&null!==(i=W.flats)&&void 0!==i&&i.length){y(!0);try{const s={headers:{"Content-Type":"application/json"}};await a.post("/api/schedule/".concat(e.id),W,s),l("Schedule created successfully!"),Z({cableNumber:W.cableNumber,flats:W.flats})}catch(d){var n,t;j.Z.error("Failed to create schedule:",d),m((null===(n=d.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Failed to create schedule. Please try again.")}finally{y(!1)}}else m("Please select a cable number first.");else m("Please fill in all schedule fields.")},className:"schedule-form",children:[(0,d.jsxs)("div",{className:"schedule-form-grid",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"date",children:"\ud83d\udcc5 Installation Date"}),(0,d.jsx)("input",{onChange:e=>Z((0,s.Z)((0,s.Z)({},W),{},{date:e.target.value})),type:"date",id:"date",name:"date",className:"form-input",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"from",children:"\ud83d\udd50 Start Time"}),(0,d.jsx)("input",{onChange:e=>Z((0,s.Z)((0,s.Z)({},W),{},{from:e.target.value})),type:"time",id:"from",name:"from",className:"form-input",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"till",children:"\ud83d\udd50 End Time"}),(0,d.jsx)("input",{onChange:e=>Z((0,s.Z)((0,s.Z)({},W),{},{till:e.target.value})),type:"time",id:"till",name:"till",className:"form-input",required:!0})]})]}),(0,d.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:F,children:[(0,d.jsx)("span",{children:"\u2705"}),F?"Creating...":"Create Schedule"]})]})]})]}),(0,d.jsx)(v.sm,{isOpen:R.isOpen,title:"Remove Block",message:"Are you sure you want to remove this block?",confirmText:"Remove",confirmVariant:"danger",onConfirm:()=>{const{index:e}=R;if(null!==e){const a=[...B];a.splice(e,1),w(a)}O({isOpen:!1,index:null})},onCancel:()=>O({isOpen:!1,index:null})})]})}},5987:(e,a,l)=>{l.d(a,{Z:()=>i});var s=l(3366);function i(e,a){if(null==e)return{};var l,i,n=(0,s.Z)(e,a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(i=0;i<t.length;i++)l=t[i],a.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}}}]);
//# sourceMappingURL=621.4ee66982.chunk.js.map