"use strict";(self.webpackChunkdynet=self.webpackChunkdynet||[]).push([[908],{4677:(e,t,n)=>{n.d(t,{Z:()=>a,y:()=>i});var r=n(3263);const s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"https://backend-dynet2-1.onrender.com",i=r.Z.create({baseURL:s,headers:{"Content-Type":"application/json"},withCredentials:!0}),o=r.Z.create({baseURL:s,headers:{"Content-Type":"application/json"},withCredentials:!0});o.interceptors.response.use((e=>e),(async e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("accessToken"),localStorage.removeItem("roles"),window.location.href="/login"),Promise.reject(e)}));const a=o},1908:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(2791),s=n(7834),i=n(4677),o=(n(8815),n(7689)),a=n(184);const l={IDLE:"idle",VALIDATING:"validating",CONNECTING:"connecting",AUTHENTICATING:"authenticating",LOADING_PROFILE:"loading_profile",REDIRECTING:"redirecting",SUCCESS:"success",ERROR:"error"},d={[l.IDLE]:"",[l.VALIDATING]:"\ud83d\udd0d Validating credentials...",[l.CONNECTING]:"\ud83c\udf10 Connecting to server...",[l.AUTHENTICATING]:"\ud83d\udd10 Authenticating...",[l.LOADING_PROFILE]:"\ud83d\udc64 Loading your profile...",[l.REDIRECTING]:"\u2728 Success! Redirecting...",[l.SUCCESS]:"\u2705 Login successful!",[l.ERROR]:"\u274c Login failed"},c=()=>{var e,t;const{setAuth:n}=(0,s.Z)(),c=(0,o.s0)(),p=(null===(e=(0,o.TH)().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/",u=(0,r.useRef)(),m=(0,r.useRef)(),[g,x]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[I,C]=(0,r.useState)(l.IDLE),[E,R]=(0,r.useState)(0),T=(0,r.useRef)(null),S=![l.IDLE,l.SUCCESS,l.ERROR].includes(I);(0,r.useEffect)((()=>{var e;null===(e=u.current)||void 0===e||e.focus()}),[]),(0,r.useEffect)((()=>{y("")}),[g,f]),(0,r.useEffect)((()=>(S?(R(0),T.current=setInterval((()=>{R((e=>e+100))}),100)):T.current&&(clearInterval(T.current),T.current=null),()=>{T.current&&clearInterval(T.current)})),[S]);const b=()=>{switch(I){case l.ERROR:return"#dc3545";case l.SUCCESS:case l.REDIRECTING:return"#28a745";default:return"#667eea"}};return(0,a.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[(0,a.jsxs)("div",{style:{background:"#ffffff",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",padding:"40px",width:"100%",maxWidth:"400px"},children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:"30px"},children:[(0,a.jsx)("img",{src:"/dynetLogo.png",alt:"Dynet Logo",style:{width:"80px",marginBottom:"20px"}}),(0,a.jsx)("h1",{style:{color:"#2c3e50",fontSize:"28px",fontWeight:"700",margin:"0 0 10px 0"},children:"Welcome Back"}),(0,a.jsx)("p",{style:{color:"#6c757d",fontSize:"16px",margin:"0"},children:"Sign in to your Fiber Installation Management System"})]}),I!==l.IDLE&&(0,a.jsxs)("div",{style:{marginBottom:"20px",padding:"16px",borderRadius:"12px",backgroundColor:I===l.ERROR?"#fff5f5":"#f8f9ff",border:"2px solid ".concat(b()),transition:"all 0.3s ease"},children:[S&&(0,a.jsx)("div",{style:{height:"4px",backgroundColor:"#e9ecef",borderRadius:"2px",marginBottom:"12px",overflow:"hidden"},children:(0,a.jsx)("div",{style:{height:"100%",backgroundColor:b(),borderRadius:"2px",animation:"pulse 1.5s ease-in-out infinite",width:I===l.VALIDATING?"20%":I===l.CONNECTING?"40%":I===l.AUTHENTICATING?"60%":I===l.LOADING_PROFILE?"80%":I===l.REDIRECTING?"95%":"100%",transition:"width 0.3s ease"}})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[S&&(0,a.jsx)("div",{style:{width:"20px",height:"20px",border:"3px solid #e9ecef",borderTopColor:b(),borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),(0,a.jsx)("span",{style:{color:b(),fontWeight:"600",fontSize:"14px"},children:d[I]})]}),S&&(0,a.jsxs)("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"12px",color:"#6c757d"},children:["\u23f1\ufe0f ",(N=E,(N/1e3).toFixed(1)),"s"]})]}),v&&(0,a.jsx)("div",{ref:m,tabIndex:-1,style:{marginBottom:"20px",padding:"15px",borderRadius:"8px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",color:"#721c24",textAlign:"center",outline:"none",fontSize:"14px",lineHeight:"1.5"},"aria-live":"assertive",children:v}),(0,a.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y(""),C(l.VALIDATING),await new Promise((e=>setTimeout(e,300))),!g||!f)return C(l.ERROR),void y("Please enter both email and password");C(l.CONNECTING);try{var t,r;C(l.AUTHENTICATING);const e=await i.y.post("/auth",{email:g,password:f},{headers:{"Content-Type":"application/json"},withCredentials:!0});C(l.LOADING_PROFILE),await new Promise((e=>setTimeout(e,200)));const s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.roles,o=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.accessToken;localStorage.setItem("accessToken",o),localStorage.setItem("roles",JSON.stringify(s)),n({email:g,roles:s,accessToken:o}),C(l.REDIRECTING),await new Promise((e=>setTimeout(e,500))),x(""),h(""),C(l.SUCCESS),c(p,{replace:!0})}catch(v){var s,o,a,d,u;C(l.ERROR),null!==v&&void 0!==v&&v.response?400===(null===(s=v.response)||void 0===s?void 0:s.status)?y("\ud83d\udcdd Missing Username or Password - Please fill in all fields."):401===(null===(o=v.response)||void 0===o?void 0:o.status)?y("\ud83d\udeab Invalid Credentials - Please check your email and password."):403===(null===(a=v.response)||void 0===a?void 0:a.status)?y("\u26d4 Access Denied - Your account may be disabled."):429===(null===(d=v.response)||void 0===d?void 0:d.status)?y("\u23f3 Too Many Attempts - Please wait a few minutes before trying again."):(null===(u=v.response)||void 0===u?void 0:u.status)>=500?y("\ud83d\udd27 Server Error - Our servers are experiencing issues. Please try again later."):y("\u274c Login Failed - ".concat(v.message||"An unexpected error occurred.")):y("\ud83d\udd0c No Server Response - The server might be starting up. Please wait a moment and try again."),setTimeout((()=>{var e;null===(e=m.current)||void 0===e||e.focus()}),0)}},className:"modern-form",children:[(0,a.jsxs)("div",{className:"modern-form-group",children:[(0,a.jsx)("label",{htmlFor:"email",className:"modern-label",children:"Email"}),(0,a.jsx)("input",{type:"email",id:"email",className:"modern-input",placeholder:"Enter your email",value:g,onChange:e=>x(e.target.value),ref:u,autoComplete:"email",required:!0,disabled:S,style:{opacity:S?.7:1}})]}),(0,a.jsxs)("div",{className:"modern-form-group",children:[(0,a.jsx)("label",{htmlFor:"password",className:"modern-label",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",className:"modern-input",placeholder:"Enter your password",value:f,onChange:e=>h(e.target.value),autoComplete:"current-password",required:!0,disabled:S,style:{opacity:S?.7:1}})]}),(0,a.jsx)("button",{type:"submit",className:"modern-button modern-button-primary",style:{width:"100%",marginTop:"10px",opacity:S?.7:1,cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:S,children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Signing In..."]}):"Sign In"})]}),(0,a.jsx)("div",{style:{textAlign:"center",marginTop:"30px",padding:"20px 0",borderTop:"1px solid #e9ecef"},children:(0,a.jsx)("p",{style:{color:"#6c757d",fontSize:"13px",margin:"0"},children:"\ud83d\udd12 Secure access to your workspace"})})]}),(0,a.jsx)("style",{children:"\n                @keyframes spin {\n                    to { transform: rotate(360deg); }\n                }\n                @keyframes pulse {\n                    0%, 100% { opacity: 1; }\n                    50% { opacity: 0.6; }\n                }\n            "})]});var N}},8815:()=>{}}]);
//# sourceMappingURL=908.e4c38729.chunk.js.map